name: Linting, testing, building
on: 
 push:
   branches: [master]
 pull_request:
   branches: [master]

jobs:
  CI-pipeline:
   runs-on: ubuntu-latest
   strategy:
    matrix:
       node-version: [ 17.x ]

   steps: 
      - uses: actions/checkout@v3
      - name: Use Node.js
        uses: actions/setup-node@v3
        with:
            node-version: ${{ matrix.node-version }}
      
      - name: Install dependencies
        run: npm install

      - name: production build
      -  run: npm run build:prod

      - name: linting typescript
      -  run: npm run lint:ts
     
      - name: linting css
      -  run: npm run lint:scss

      - name: unit testing
      -  run: npm run test:unit

      - name: build storybook
      -  run: npm run storybook:build

      - name: screenshot testing
      -  run: npm run test:loki:ci

        

    